import{r as d,j as e,c as h}from"./client-BeShzHsv.js";function m(){const[a,o]=d.useState(null),n=async()=>{if(!a){alert("Please select a color blindness type");return}try{const[r]=await chrome.tabs.query({active:!0,currentWindow:!0}),s=r.url||"";if(s.startsWith("chrome://")||s.startsWith("chrome-extension://")||s.startsWith("edge://")||s.startsWith("about:")||s.startsWith("moz-extension://")){alert(`This extension cannot work on browser internal pages (chrome://, chrome-extension://, etc.).

Please open a regular website (like google.com, wikipedia.org) and try again.`);return}if(!chrome.scripting||!chrome.scripting.executeScript){alert('Scripting API is not available. Please make sure the extension has the "scripting" permission and reload the extension.');return}let i=!1;try{await new Promise((t,l)=>{chrome.tabs.sendMessage(r.id,{action:"ping"},p=>{chrome.runtime.lastError?l(chrome.runtime.lastError):t(p)})}),i=!0}catch{try{await chrome.scripting.executeScript({target:{tabId:r.id},files:["content.js"]}),i=!0,await new Promise(t=>setTimeout(t,100))}catch(t){console.error("Failed to inject script:",t),alert(`Cannot inject script on this page: ${t.message}

This usually means:
1. You're on a browser internal page (chrome://)
2. The page doesn't allow script injection

Please try on a regular website like google.com`);return}}if(!i){alert("Content script could not be loaded. Please refresh the page and try again.");return}chrome.tabs.sendMessage(r.id,{action:"applyColorBlind",type:a},t=>{chrome.runtime.lastError?(console.error("Error sending message:",chrome.runtime.lastError),alert(`Error: ${chrome.runtime.lastError.message}. Please refresh the page and try again.`)):(console.log("Styles applied successfully",t),t&&!t.success&&alert(`Error: ${t.error||"Unknown error"}`))})}catch(r){console.error("Error:",r),alert(`Error applying styles: ${r.message}. Please refresh the page and try again.`)}},c=async()=>{try{const[r]=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(r.id,{action:"removeColorBlind"},()=>{chrome.runtime.lastError?console.error("Error:",chrome.runtime.lastError):(o(null),console.log("Styles removed successfully"))})}catch(r){console.error("Error:",r)}};return e.jsxs("div",{className:"popup-container",children:[e.jsx("h3",{children:"Easeo"}),e.jsxs("div",{className:"popup-options",children:[e.jsxs("div",{className:"option",children:[e.jsxs("div",{className:"option-info",children:[e.jsx("img",{src:"/images/protanopia.jpg",alt:"Protanopia",style:{height:"24px",width:"43px"}}),e.jsx("span",{style:{paddingLeft:"12px"},children:"Protanopia"})]}),e.jsx("input",{type:"radio",name:"colorBlindType",id:"protanopia",checked:a==="protanopia",onChange:()=>o("protanopia")})]}),e.jsxs("div",{className:"option",children:[e.jsxs("div",{className:"option-info",children:[e.jsx("img",{src:"/images/tritanopia.jpg",alt:"Tritanopia",style:{height:"24px",width:"43px"}}),e.jsx("span",{style:{paddingLeft:"12px"},children:"Tritanopia"})]}),e.jsx("input",{type:"radio",name:"colorBlindType",id:"tritanopia",checked:a==="tritanopia",onChange:()=>o("tritanopia")})]}),e.jsxs("div",{className:"option",children:[e.jsxs("div",{className:"option-info",children:[e.jsx("img",{src:"/images/deutritanopia.jpg",alt:"Deuteranopia",style:{height:"24px",width:"43px"}}),e.jsx("span",{style:{paddingLeft:"12px"},children:"Deuteranopia"})]}),e.jsx("input",{type:"radio",name:"colorBlindType",id:"deuteranopia",checked:a==="deuteranopia",onChange:()=>o("deuteranopia")})]}),e.jsxs("div",{className:"option",children:[e.jsxs("div",{className:"option-info",children:[e.jsx("img",{src:"/images/achromotopsia.jpg",alt:"Achromatopsia",style:{height:"24px",width:"43px"}}),e.jsx("span",{style:{paddingLeft:"12px"},children:"Achromatopsia"})]}),e.jsx("input",{type:"radio",name:"colorBlindType",id:"achromatopsia",checked:a==="achromatopsia",onChange:()=>o("achromatopsia")})]})]}),e.jsxs("div",{className:"popup-buttons",children:[e.jsx("button",{type:"button",onClick:n,children:"Apply"}),e.jsx("button",{type:"button",onClick:c,children:"Remove"})]})]})}h.createRoot(document.getElementById("root")).render(e.jsx(m,{}));
